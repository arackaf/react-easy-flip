import{useRef as t,useEffect as n,useLayoutEffect as e}from"react";var r=function(t){var n;return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];clearTimeout(n),n=setTimeout(function(){return t.apply(void 0,e)})}};function i(i){var a=i.root,o=i.opts,u=i.deps,s=t({refs:Object.create(null)}),c=o.transition||500,f=o.delay||0,d=o.easing||"ease";n(function(){if(a.current){var t=a.current,n=function(t){s.current.refs[t.target.dataset.id]=t.target.getBoundingClientRect(),t.target.inFlight=!1};return t.addEventListener("transitionend",n),function(){return t.removeEventListener("transitionend",n)}}},[a,u]),n(function(){var t=r(function(){if(a.current)for(var t=0,n=a.current.children;t<n.length;t+=1){var e=n[t];s.current.refs[e.dataset.id]=e.getBoundingClientRect()}});return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},[a]),e(function(){if(a.current){var t=a.current.children;if(!(t.length<1)){var n=Object.assign({},s.current.refs);requestAnimationFrame(function(){for(var e=function(){var t,e=i[r],a=e.dataset.id;if(a in n){var o=n[a],u=o.left,s=o.top,l=e.getBoundingClientRect().left,v=e.getBoundingClientRect().top;(t=e,function(n){t.style.transform="translate("+n.dx+"px, "+n.dy+"px)",t.style.transition="transform 0s"})({dx:u-l,dy:s-v}),requestAnimationFrame(function(){return(t=e).style.transform="",t.style.transition="transform "+c+"ms "+d+" "+f+"ms",void(t.inFlight=!0);var t})}},r=0,i=t;r<i.length;r+=1)e()});for(var e=0,r=t;e<r.length;e+=1){var i=r[e];i.inFlight||(s.current.refs[i.dataset.id]=i.getBoundingClientRect())}}}},[u,c,f,d,a])}export{i as useFlipAnimation};
//# sourceMappingURL=index.mjs.map
